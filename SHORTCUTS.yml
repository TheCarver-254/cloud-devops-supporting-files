#creating a new user in linux
sudo useradd -m  thecarver
sudo passwd thecarver
su -l thecarver #sign in with the new user

#Add a user to the Sudo Group in the Sudoers File
#https://linuxhint.com/centos/
sudo usermod -aG sudo newuser
groups newuser #verify https://phoenixnap.com/kb/how-to-create-sudo-user-on-ubuntu

#git config
git config --global user.email "micahacosta51@gmail.com"
git config --global user.name "TheCarver"



#clone a github repo using ssh   #note: for github, leave below abve as default
#https://stackoverflow.com/questions/2643502/git-how-to-solve-permission-denied-publickey-error-when-using-git
cd ~/.ssh && ssh-keygen
#Your identification has been saved in /home/thecarver/.ssh/id_rsa
#Your public key has been saved in /home/thecarver/.ssh/id_rsa.pub
cat id_rsa.pub #then paste the output to github ssh & gpg keys section


#copy the pem file from windows to wsl
cp /mnt/c/Users/micah/Downloads/udacity-prometheus.pem  /home/thecarver/2023DevOps/SSH


#upgrading linux
sudo apt update
sudo apt upgrade # 20 packages can be upgraded
sudo apt dist-upgrade # not mandatory

#installing python3
#frst validate if python3 is installed
ls /usr/bin/python* 
which python python2 python3

sudo apt update
sudo apt install python3 -y

#Installing pip for Python 3
sudo apt update
sudo apt install python3-pip  #apt-get install python3-pip
pip3 --version #validate


#error : sudo: apt-add-repository: command not found -- issue not in Ubuntu , only in Debian Parrot
#error: Error code: Wsl/Service/CreateInstance/MountVhd/ERROR_FILE_NOT_FOUND
#https://superuser.com/questions/1758361/error-code-wsl-service-createinstance-mountvhd-error-file-not-found
wsl -l
wsl --unregister Ubuntu

#installing & configuring ansible
sudo apt-add-repository ppa:ansible/ansible
sudo apt update
sudo apt install ansible


#running ansible trials
ansible-playbook -i inventory playbook-01.yml -u sammy
ansible-playbook -i inventory main.yml
ansible all -i inventory -m ping -u ubuntu


#22/07/23
#install aws cli
sudo apt install awscli

#Script to Query EC2 for Instances and Output to File
aws ec2 describe-instances \
   --query 'Reservations[*].Instances[*].PublicIpAddress' \
   --output text >> inventory


#running an ansible playbook
# Assuming the udacity.pem and inventory files are present in the current directory
ansible-playbook main-remote.yml -i inventory --private-key udacity-webserver.pem


#ssh to an aws linux server
#Run this command, if necessary, to ensure your key is not publicly viewable.
chmod 400 udacity-webserver.pem

#Connect to your instance using its Public DNS:
#Example:
 ssh -i "udacity-webserver.pem" ubuntu@ec2-3-95-208-234.compute-1.amazonaws.com